---
aliases:
  - "ARP"
  - "Address Resolution Protocol"
  - "–ø—Ä–æ—Ç–æ–∫–æ–ª —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∞–¥—Ä–µ—Å–æ–≤"
tags:
  - "#network #protocol #ethernet"
path:
  - "–∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ/—Å–µ—Ç–∏/–ø—Ä–æ—Ç–æ–∫–æ–ª—ã"
---

## üìå ARP  
[[ARP]] (Address Resolution Protocol) ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª —É—Ä–æ–≤–Ω—è [[Link Layer]], –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è [[IP]]-–∞–¥—Ä–µ—Å–æ–≤ –≤ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ [[MAC]]-–∞–¥—Ä–µ—Å–∞ –≤ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö ([[LAN]]), –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö [[Ethernet]].

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç  
–ö–æ–≥–¥–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ö–æ—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç –ø–æ IP, –Ω–æ –Ω–µ –∑–Ω–∞–µ—Ç [[MAC]]-–∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –æ–Ω–æ:

1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç ARP-–∑–∞–ø—Ä–æ—Å (broadcast): ¬´–ö—Ç–æ –≤–ª–∞–¥–µ–µ—Ç IP X.X.X.X?¬ª  
2. –£–∑–µ–ª —Å —ç—Ç–∏–º IP-–∞–¥—Ä–µ—Å–æ–º –æ—Ç–≤–µ—á–∞–µ—Ç —Å–≤–æ–∏–º MAC  
3. –ê–¥—Ä–µ—Å –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –≤ [[ARP cache]]

–ü–∞–∫–µ—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —É–∂–µ —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ Ethernet:

```

IP-—É—Ä–æ–≤–µ–Ω—å: 192.168.1.1  
‚Üì ARP ‚Üí MAC: aa:bb:cc:dd:ee:ff  
‚Üì Ethernet ‚Üí –¥–æ—Å—Ç–∞–≤–∫–∞ —Ñ—Ä–µ–π–º–∞

```

–¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π:

- **ARP Request** ‚Äî —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å  
- **ARP Reply** ‚Äî –æ—Ç–≤–µ—Ç –æ—Ç —Ü–µ–ª–µ–≤–æ–≥–æ —É–∑–ª–∞  
- **Gratuitous ARP** ‚Äî –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ IP/MAC (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ failover)

–ú–µ—Ö–∞–Ω–∏–∑–º—ã:

- [[ARP cache]] ‚Äî —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π IP‚ÜíMAC  
- –û—á–∏—Å—Ç–∫–∞ –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç –∑–∞–ø–∏—Å–µ–π  
- `ip neigh` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∫—ç—à–∞ –≤ [[Linux]]

## ‚öôÔ∏è –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

| –ö–æ–Ω—Ç–µ–∫—Å—Ç           | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                 |
|---------------------|--------------------------------------------|
| [[Ethernet LAN]]     | –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–æ–≤ –≤ MAC               |
| [[Router]]           | –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —Å–æ—Å–µ–¥–µ–π                 |
| [[Firewall]] / [[NAT]] | –£—á–µ—Ç –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –ø—Ä–∞–≤–∏–ª —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏      |
| [[Virtualization]]   | [[Bridge]]-—Å–µ—Ç–∏, [[vNIC]] –∞–¥—Ä–µ—Å–∞—Ü–∏—è       |

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞  
- –ü—Ä–æ—Å—Ç–∞—è –∏ –±—ã—Å—Ç—Ä–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö [[LAN]]  
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏  
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö

## ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏  
- [[ARP spoofing]] ‚Äî –≤–µ–∫—Ç–æ—Ä –¥–ª—è –∞—Ç–∞–∫  
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–π –ø–æ–¥—Å–µ—Ç–∏  
- –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç [[IPv6]] (—Ç–∞–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [[NDP]])
```
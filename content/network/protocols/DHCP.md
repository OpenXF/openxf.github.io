---
aliases:
  - "DHCP"
  - "Dynamic Host Configuration Protocol"
  - "–ø—Ä–æ—Ç–æ–∫–æ–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ IP"
tags:
  - "#network #protocols #ip"
path:
  - "–∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ/—Å–µ—Ç–∏/–ø—Ä–æ—Ç–æ–∫–æ–ª—ã"
---

## üìå DHCP  
Dynamic Host Configuration Protocol [[DHCP]] ‚Äî —Å–µ—Ç–µ–≤–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞—é—â–∏–π IP-–∞–¥—Ä–µ—Å–∞ –∏ —Å–µ—Ç–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —É–∑–ª–∞–º –≤ [[LAN]] –±–µ–∑ —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç  
[[DHCP]] —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –º–æ–¥–µ–ª–∏ –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä. –ö–æ–≥–¥–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ç–∏, –æ–Ω–æ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç —á–µ—Ç—ã—Ä—ë—Ö—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å:

1. **DHCPDISCOVER** ‚Äî –∫–ª–∏–µ–Ω—Ç –∏—â–µ—Ç —Å–µ—Ä–≤–µ—Ä  
2. **DHCPOFFER** ‚Äî —Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã  
3. **DHCPREQUEST** ‚Äî –∫–ª–∏–µ–Ω—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ  
4. **DHACK** ‚Äî —Å–µ—Ä–≤–µ—Ä –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∏ —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç –∞—Ä–µ–Ω–¥—É  

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã, –≤—ã–¥–∞–≤–∞–µ–º—ã–µ –∫–ª–∏–µ–Ω—Ç—É:
- IP-–∞–¥—Ä–µ—Å –∏ –º–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏  
- [[Gateway]] –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é  
- [[DNS]]-—Å–µ—Ä–≤–µ—Ä—ã  
- [[NTP]]-—Å–µ—Ä–≤–µ—Ä—ã  
- –í—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã (lease)

–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ [[UDP]]: –ø–æ—Ä—Ç 67 (—Å–µ—Ä–≤–µ—Ä), –ø–æ—Ä—Ç 68 (–∫–ª–∏–µ–Ω—Ç).

## ‚öôÔ∏è –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

| –°—Ü–µ–Ω–∞—Ä–∏–π                  | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                 |
|---------------------------|--------------------------------------------|
| [[LAN]] –∏ Wi-Fi           | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤      |
| [[Virtualization]]        | –í—ã–¥–∞—á–∞ IP –¥–ª—è [[VM]] –∏ [[Container]]       |
| [[ISP Equipment]]         | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞              |
| [[PXE Boot]]              | –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ —Å–µ—Ç–∏       |

## üíª –ü—Ä–∏–º–µ—Ä (–Ω–∞ Linux)

```bash
dhclient eth0             # –∑–∞–ø—É—Å—Ç–∏—Ç—å DHCP-–∫–ª–∏–µ–Ω—Ç –≤—Ä—É—á–Ω—É—é
nmcli connection show     # –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
journalctl -u NetworkManager | grep dhcp
````

## üìê DHCP-—Å–µ—Å—Å–∏—è

```
[Client] ‚Üí DHCPDISCOVER ‚Üí
          ‚Üê DHCPOFFER     ‚Üê [Server]
[Client] ‚Üí DHCPREQUEST  ‚Üí
          ‚Üê DHCPACK       ‚Üê [Server]
```

## üß© –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞—Ä–µ–Ω–¥—ã

|–ü–æ–ª–µ|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|---|---|
|`lease time`|–í—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è –∞–¥—Ä–µ—Å–∞|
|`renewal time`|–í—Ä–µ–º—è –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è –∞—Ä–µ–Ω–¥—ã|
|`rebinding time`|–ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—Ä–æ—Å–∞ –ø–æ—Å–ª–µ —Ç–∞–π–º–∞—É—Ç–∞|

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Ç–µ–π
    
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–∞–º–∏
    
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (DNS, routes, PXE)
    

### ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –£—è–∑–≤–∏–º–æ—Å—Ç—å –∫ –ø–æ–¥–º–µ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ (DHCP spoofing)
    
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ DHCP-—Å–µ—Ä–≤–µ—Ä–∞
    
- –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∞–¥—Ä–µ—Å–æ–≤ –∏–ª–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
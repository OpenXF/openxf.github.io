---
aliases:
  - "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–∑ C –≤ asm"
  - "C to asm immediate"
tags:
  - "#c #assembly #–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è"
path:
  - "languages/c/integration"
---

## üìå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–∑ C –∫–∞–∫ –ª–∏—Ç–µ—Ä–∞–ª–∞ –≤ asm

–ü—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ C –∏ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ `asm` (GCC/Clang), –≤–æ–∑–º–æ–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–∑ C-–∫–æ–¥–∞ –∏ –µ—ë –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ **–∏–º–º–µ–¥–∏–∞—Ç (literal)** –≤ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω–æ–π –≤—Å—Ç–∞–≤–∫–µ. –≠—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑–≤–µ—Å—Ç–Ω–æ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ß—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∫–∞–∫ –ª–∏—Ç–µ—Ä–∞–ª (`$42` –≤ [[x86_64]]), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è —Ñ–æ—Ä–º–∞:

```c
const int myval = 42;
int result;
asm volatile (
    "movl $%c1, %0"
    : "=r"(result)
    : "i"(myval)
);
````

- `%c1` ‚Äî –≤—Å—Ç–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É.
    
- `"i"` ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å **–∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π –≤—Ä–µ–º–µ–Ω–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**.
    
- `const` –∏–ª–∏ `#define` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è literal.
    

### –ß–µ—Ä–µ–∑ –º–∞–∫—Ä–æ—Å:

```c
#define MYVAL 42
asm volatile (
    "movl $%c0, %%eax"
    :
    : "i"(MYVAL)
);
```

## ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä—ã—Ö **–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—ã—á–Ω—ã–µ `int`, –Ω–µ `const`).
    
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É [[GCC Inline Assembly]].
    

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥ –±–µ–∑ –ª–∏—à–Ω–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –ø–∞–º—è—Ç–∏.
    
- –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ compile-time –∑–Ω–∞—á–µ–Ω–∏–π.
    

## ‚öôÔ∏è –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

- –í —Å–∏—Å—Ç–µ–º–Ω–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –¥—Ä–∞–π–≤–µ—Ä–æ–≤ –∏–ª–∏ –∑–∞–≥—Ä—É–∑—á–∏–∫–æ–≤.
    
- –í –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–º –∫–æ–¥–µ, –≥–¥–µ –≤–∞–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏.
    


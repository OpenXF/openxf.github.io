---
aliases:
  - "Timer"
  - "—Ç–∞–π–º–µ—Ä"
  - "–∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π —Ç–∞–π–º–µ—Ä"
tags:
  - "#hardware #embedded #peripherals"
path:
  - "–∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ/–∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ/—Ç–∞–π–º–µ—Ä—ã"
---

## üìå [[Timer|Timer]]  
[[Timer|Timer]] ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã–π –º–æ–¥—É–ª—å –≤ [[MCU]] –∏–ª–∏ [[SoC]], –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –æ—Ç—Å—á—ë—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏, —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è [[PWM]].

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç  
–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π —Ç–∞–π–º–µ—Ä –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Å—á—ë—Ç—á–∏–∫–µ, –∫–æ—Ç–æ—Ä—ã–π:

- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è (–∏–ª–∏ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è) –ø–æ —Å–∏–≥–Ω–∞–ª—É –æ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ [[Clock]]  
- –ü—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –≤—ã–∑—ã–≤–∞–µ—Ç [[Interrupts]]  
- –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ–∂–∏–º–∞—Ö:
  - **Basic**: –ø—Ä–æ—Å—Ç–æ–π —Å—á—ë—Ç –¥–æ overflow  
  - **Compare Match**: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏  
  - **PWM Mode**: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è [[PWM]]-—Å–∏–≥–Ω–∞–ª–∞  
  - **Capture Mode**: –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

–û–±—ã—á–Ω–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ 8-, 16- –∏–ª–∏ 32-–±–∏—Ç–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ–ª–∏—Ç–µ–ª—è —á–∞—Å—Ç–æ—Ç—ã (prescaler).

## ‚öôÔ∏è –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

| –û–±–ª–∞—Å—Ç—å                    | –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è                      |
|----------------------------|---------------------------------------------|
| [[PWM]]                    | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∫–≤–∞–∂–Ω–æ—Å—Ç–∏  |
| [[Delays]]                 | –¢–æ—á–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏                    |
| [[Real-Time OS]]           | –ö–≤–∞–Ω—Ç–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞           |
| [[Event Timestamping]]     | –û—Ç–º–µ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö       |
| [[Watchdog Timer]]         | –ö–æ–Ω—Ç—Ä–æ–ª—å –∑–∞–≤–∏—Å–∞–Ω–∏–π —Å–∏—Å—Ç–µ–º—ã                 |

## üíª –ü—Ä–∏–º–µ—Ä (STM32 HAL, PWM)

```c
TIM_OC_InitTypeDef sConfigOC = {0};
sConfigOC.OCMode = TIM_OCMODE_PWM1;
sConfigOC.Pulse = 128; // duty cycle
HAL_TIM_PWM_ConfigChannel(&htim1, &sConfigOC, TIM_CHANNEL_1);
HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_1);
````

## üìê –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç–∞–π–º–µ—Ä–∞

|–ö–æ–º–ø–æ–Ω–µ–Ω—Ç|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|---|---|
|Counter|–û—Å–Ω–æ–≤–Ω–æ–π —Å—á—ë—Ç–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä|
|Prescaler|–î–µ–ª–∏—Ç–µ–ª—å –≤—Ö–æ–¥–Ω–æ–π —á–∞—Å—Ç–æ—Ç—ã|
|Compare Unit|–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º|
|Auto-Reload|–ó–Ω–∞—á–µ–Ω–∏–µ overflow (–ø—Ä–µ–¥–µ–ª —Å—á—ë—Ç–∞)|
|Interrupt Line|–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è|

## üß© –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- [[PWM]] ‚Äî –≤—ã—Ö–æ–¥–Ω–æ–π —Ä–µ–∂–∏–º —Ç–∞–π–º–µ—Ä–∞
    
- [[RTC]] ‚Äî —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∞–π–º–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
    
- [[Interrupts]] ‚Äî —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è —Ç–∞–π–º–µ—Ä–∞
    
- [[SysTick]] ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ç–∞–π–º–µ—Ä –≤ [[ARM Cortex-M]]
    

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
    
- –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å (–Ω–µ –≥—Ä—É–∑–∏—Ç [[root/CPU/CPU]])
    
- –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: [[PWM]], —Ç–∞–π–º–∏–Ω–≥, –∑–∞—Ö–≤–∞—Ç, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
    

## ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ—Å—Ç—å –±–∏—Ç–Ω–æ—Å—Ç–∏ (–ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞)
    
- –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –¥–µ–ª–∏—Ç–µ–ª—è
    
- –ù–µ –≤—Å–µ–≥–¥–∞ —Ö–≤–∞—Ç–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∞–π–º–µ—Ä–æ–≤ –≤ [[MCU]]
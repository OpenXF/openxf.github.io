---
aliases:
  - "–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–∏—Å–∫–∞"
  - "disk controller"
  - "HBA"
tags:
  - "#hardware #storage #–≤–≤–æ–¥–≤—ã–≤–æ–¥"
path:
  - "–∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ/–∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ/–Ω–∞–∫–æ–ø–∏—Ç–µ–ª–∏"
---

## üìå –ö—Ä–∞—Ç–∫–æ  
[[Disk Controller]] ‚Äî –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –ø–µ—Ä–µ–¥–∞—á–µ–π –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º (HDD/SSD) –∏ —Å–∏—Å—Ç–µ–º–æ–π, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—è –∫–æ–º–∞–Ω–¥—ã —á—Ç–µ–Ω–∏—è, –∑–∞–ø–∏—Å–∏ –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ–∫—Ç–æ—Ä–∞–º.

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç  
[[Disk Controller]] –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –æ—Ç [[root/CPU/CPU]] (—á–µ—Ä–µ–∑ [[IOBUS|I/O bus]]) –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏—Ö –≤ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –¥–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.  
–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Ä–µ–∞–ª–∏–∑—É–µ—Ç:
- –æ—á–µ—Ä–µ–¥—å –∫–æ–º–∞–Ω–¥ ([[NCQ]] / [[TCQ]])
- —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞—Ü–∏–µ–π ([[LBA]])
- –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—É—é –≤—ã–±–æ—Ä–∫—É
- –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å [[DMA]] controller –∏–ª–∏ [[PIO]]

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏:
- [[AHCI]] / [[SATA]]
- [[NVMe]] / [[PCIe]]
- [[SCSI]] / [[SAS]]

## ‚öôÔ∏è –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

| –¢–∏–ø —Ö—Ä–∞–Ω–∏–ª–∏—â–∞  | –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä                             |
|----------------|-----------------------------------------|
| HDD            | –ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å –±—É—Ñ–µ—Ä–æ–º       |
| SATA SSD       | AHCI-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å DRAM –∏–ª–∏ –±–µ–∑ –Ω–µ—ë      |
| NVMe SSD       | NVMe-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–∞ PCIe-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ      |
| RAID           | –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π RAID-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (HBA/RAID)   |
| [[Embedded]]   | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π eMMC/UFS-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä          |

## üíª –ü—Ä–∏–º–µ—Ä (–Ω–∞ C: —Ä–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ ioctl –≤ Linux)

```c
int fd = open("/dev/sda", O_RDONLY);
ioctl(fd, HDIO_GET_IDENTITY, &id_info); // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
close(fd);
````

## üß© –ú–æ–¥—É–ª–∏ –∏ –ª–æ–≥–∏–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

|–ö–æ–º–ø–æ–Ω–µ–Ω—Ç|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|---|---|
|Command Decoder|–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –æ—Ç [[root/CPU/CPU]]|
|Data Buffer|–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤ (–∫—ç—à)|
|DMA Engine|–ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ —É—á–∞—Å—Ç–∏—è CPU|
|Error Checking|–ö–æ–Ω—Ç—Ä–æ–ª—å CRC/ECC|
|Flash Translation Layer (FTL)|–î–ª—è SSD: –ª–æ–≥–∏–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∞–¥—Ä–µ—Å–æ–≤|
|Queue Manager|–û—á–µ—Ä–µ–¥—å –∫–æ–º–∞–Ω–¥, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ|

## üìê –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

```
CPU / Kernel
     ‚Üì       \
   Driver    DMA setup
     ‚Üì         \
 +-----------+   +-------------+
 |   Driver  |‚Üí‚Üí‚Üí| Disk Ctrl   |
 +-----------+   +-------------+
                     ‚Üì
                [Storage Device]
```

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞
    
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—è–º–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Ä—è–¥–∫–∞ –¥–æ—Å—Ç—É–ø–∞
    
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ DMA, ECC, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è
    

### ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –í–æ–∑–º–æ–∂–Ω—ã–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ (SATA 6Gbps vs PCIe 4.0+)
    
- –ü—Ä–æ–±–ª–µ–º—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (—Ä–∞–∑–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã, —Ä–µ–∂–∏–º—ã)
    
- –ó–∞–¥–µ—Ä–∂–∫–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ä–µ–∂–∏–º–æ–≤
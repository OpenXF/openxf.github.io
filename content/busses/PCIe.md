---
aliases:
  - "PCI Express"
  - "PCIe"
  - "—à–∏–Ω–∞ PCI Express"
tags:
  - "#hardware #bus #–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã"
path:
  - "–∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ/–∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ/—à–∏–Ω—ã"
---

## üìå –ö—Ä–∞—Ç–∫–æ  
[[PCIe]] (Peripheral Component Interconnect Express) ‚Äî –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —à–∏–Ω–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∫ [[root/CPU/CPU]] –∏ [[RAM]], –ø—Ä–∏—à–µ–¥—à–∞—è –Ω–∞ —Å–º–µ–Ω—É PCI –∏ AGP.

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç  
[[PCIe]] –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ç–æ—á–∫–∞-—Ç–æ—á–∫–∞** (point-to-point) —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –æ–±—â–µ–π —à–∏–Ω—ã. –ö–∞–∂–¥—ã–π [[PCIe Device]] –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ [[Root Complex]] —á–µ—Ä–µ–∑ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ª–∏–Ω–∏–∏ (**lanes**), –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö ‚Äî —ç—Ç–æ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª (1 –±–∏—Ç –Ω–∞ –ø—Ä–æ–≤–æ–¥).

–û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ü–æ–ª–Ω–∞—è –¥—É–ø–ª–µ–∫—Å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ –∫–∞–∂–¥–æ–π –ª–∏–Ω–∏–∏  
- –ü–∞–∫–µ—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª (TLP + DLLP)  
- –õ–æ–≥–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: Root Complex ‚Üî Switch ‚Üî Endpoints  
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ [[DMA]], –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π, hot-plug, peer-to-peer

## ‚öôÔ∏è –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

| –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ            | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                               |
|-----------------------|-------------------------------------------|
| [[GPU]]               | –í—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö |
| [[NVMe SSD]]          | –ù–∏–∑–∫–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏, –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å |
| [[NIC]]               | 10G/40G/100G —Å–µ—Ç–µ–≤—ã–µ –∫–∞—Ä—Ç—ã                |
| [[FPGA]]              | –í—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–π –æ–±–º–µ–Ω —Å —Ö–æ—Å—Ç–æ–º          |
| [[Capture Cards]]     | –í–∏–¥–µ–æ-–≤–≤–æ–¥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏            |

## üíª –ü—Ä–∏–º–µ—Ä (–Ω–∞ —É—Ä–æ–≤–Ω–µ Linux)

```bash
lspci | grep -i nvme
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ PCIe-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ NVMe
````

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —É—Ä–æ–≤–Ω–∏ PCIe

|–£—Ä–æ–≤–µ–Ω—å|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|---|---|
|Physical Layer|–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö (–ª–∏–Ω–∏–∏)|
|Data Link Layer|–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å: –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –∫–æ–Ω—Ç—Ä–æ–ª—å –æ—à–∏–±–æ–∫|
|Transaction Layer|–§–æ—Ä–º–∞—Ç –ø–∞–∫–µ—Ç–æ–≤, –∞–¥—Ä–µ—Å–∞—Ü–∏—è, –∫–æ–º–∞–Ω–¥—ã|

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ª–∏–Ω–∏–π:

- `x1`, `x2`, `x4`, `x8`, `x16`, `x32` ‚Äî —á–∏—Å–ª–æ lane'–æ–≤ (–¥–æ 32 –≤ PCIe 6.0)
    
- –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å = (—Å–∫–æ—Ä–æ—Å—Ç—å √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏–Ω–∏–π √ó 2)
    

–ü—Ä–∏–º–µ—Ä—ã —Å–∫–æ—Ä–æ—Å—Ç–µ–π:

|–í–µ—Ä—Å–∏—è|–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (–Ω–∞ –æ–¥–Ω—É –ª–∏–Ω–∏—é)|
|---|---|
|PCIe 3.0|1 GB/s (–¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ)|
|PCIe 4.0|2 GB/s|
|PCIe 5.0|4 GB/s|
|PCIe 6.0|8 GB/s|

## üìê –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

```
[CPU] ‚Üê‚Üí [Root Complex] ‚Üê‚Üí [Switch] ‚Üê‚Üí [Device #1]
                                ‚Üì
                            [Device #2]
```

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
    
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, –ø–∞–∫–µ—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª ‚Äî —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
    
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ DMA, –≥–æ—Ä—è—á–µ–π –∑–∞–º–µ–Ω—ã, peer-to-peer
    

### ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–µ—Ä—Å–∏–∏ (3.0, 4.0, 5.0...) –Ω–∞ –ø–ª–∞—Ç–µ –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
    
- –ü–æ–≤—ã—à–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–µ –∏ —ç–ª–µ–∫—Ç—Ä–æ–ø–∏—Ç–∞–Ω–∏—é
    
- –ó–∞–¥–µ—Ä–∂–∫–∏ –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã
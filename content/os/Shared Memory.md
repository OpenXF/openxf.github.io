---
aliases:
  - "Shared Memory"
  - "–æ–±—â–∞—è –ø–∞–º—è—Ç—å"
  - "shared memory segment"
tags:
  - "#os #ipc #memory"
path:
  - "–∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ/–æ—Å/–º–µ–∂–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–µ_–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ"
---

## üìå Shared Memory  
Shared Memory ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º [[IPC]] (–º–µ–∂–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è), –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–æ—Ü–µ—Å—Å–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ —É—á–∞—Å—Ç–∫—É [[RAM]] –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç  
–°–µ–≥–º–µ–Ω—Ç –æ–±—â–µ–π –ø–∞–º—è—Ç–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–¥–Ω–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è (—á–µ—Ä–µ–∑ [[mmap]] –∏–ª–∏ [[shmget]]) –≤ –∞–¥—Ä–µ—Å–Ω—ã–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –¥—Ä—É–≥–∏—Ö. –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –∏ –ø–∏—Å–∞—Ç—å –≤ —ç—Ç–æ—Ç —Å–µ–≥–º–µ–Ω—Ç, –∫–∞–∫ –≤ –æ–±—ã—á–Ω—ã–π –º–∞—Å—Å–∏–≤.

–¢–∏–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

- **POSIX**: `shm_open`, `mmap`, `ftruncate`, `close`, `unlink`  
- **System V**: `shmget`, `shmat`, `shmdt`, `shmctl`

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

- –ù–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é: –Ω—É–∂–Ω–∞ [[Semaphore]] –∏–ª–∏ [[Mutex]]  
- –†–∞–∑–º–µ—Ä –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/dev/shm` –≤ [[Linux]])

## ‚öôÔ∏è –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

| –û–±–ª–∞—Å—Ç—å                 | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ                                     |
|-------------------------|------------------------------------------------|
| [[Multithreading]]      | –†–∞–∑–¥–µ–ª—è–µ–º—ã–π –±—É—Ñ–µ—Ä –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏            |
| [[High-Performance Computing]] | –û–±–º–µ–Ω –≤ [[NUMA]]-—Å–∏—Å—Ç–µ–º–∞—Ö, [[MPI]]      |
| [[Database Engine]]     | [[Shared Buffer Cache]] –≤ [[PostgreSQL]]       |
| [[GPU]] / [[Accelerator]] | –û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ —Å [[root/CPU/CPU]] –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è     |
| [[RTOS]] / Embedded     | –ë—ã—Å—Ç—Ä—ã–π –æ–±–º–µ–Ω –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏                   |

## üíª –ü—Ä–∏–º–µ—Ä (POSIX Shared Memory, C)

```c
int fd = shm_open("/myshm", O_CREAT | O_RDWR, 0666);
ftruncate(fd, 4096);
char *ptr = mmap(0, 4096, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
strcpy(ptr, "hello world");
````

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±–º–µ–Ω–∞ (–±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è)
    
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–∞—Ö –¥–∞–Ω–Ω—ã—Ö
    
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ (–º–∞—Å—Å–∏–≤ –≤ –ø–∞–º—è—Ç–∏)
    

## ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    
- –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –≥–æ–Ω–∫–∞–º –∏ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
    
- –†–∏—Å–∫ —É—Ç–µ—á–∫–∏, –µ—Å–ª–∏ –Ω–µ –≤—ã–∑–≤–∞—Ç—å `munmap`/`shm_unlink`
    
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ —Ä–∞–∑–º–µ—Ä–∞–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
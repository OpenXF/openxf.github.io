---
title: Mutex (Mutual Exclusion)
aliases:
  - "Mutex"
  - "–º—å—é—Ç–µ–∫—Å"
  - "–≤–∑–∞–∏–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ"
tags:
  - "#concurrency"
  - "#synchronization"
  - "#lock"
  - "#multithreading"
  - "#glossary"
path:
  - "software/concurrency/mutex"
---

## üìå Mutex

**Mutex** (Mutual Exclusion, –º—å—é—Ç–µ–∫—Å) ‚Äî –æ–¥–∏–Ω –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –≤–∑–∞–∏–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–¥–µ–ª—è–µ–º—ã–º —Ä–µ—Å—É—Ä—Å–∞–º. –ú—å—é—Ç–µ–∫—Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤ –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –≤–ª–∞–¥–µ—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–µ–∫—Ü–∏–µ–π, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –≥–æ–Ω–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

---

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–∏–Ω—Ü–∏–ø –¥–µ–π—Å—Ç–≤–∏—è

- –ü–æ—Ç–æ–∫, –∂–µ–ª–∞—é—â–∏–π –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–∞–∑–¥–µ–ª—è–µ–º–æ–º—É —Ä–µ—Å—É—Ä—Å—É, –≤—ã–∑—ã–≤–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é **lock()** –º—å—é—Ç–µ–∫—Å–∞.
- –ï—Å–ª–∏ –º—å—é—Ç–µ–∫—Å —Å–≤–æ–±–æ–¥–µ–Ω ‚Äî –ø–æ—Ç–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É.
- –ï—Å–ª–∏ –º—å—é—Ç–µ–∫—Å —É–∂–µ –∑–∞—Ö–≤–∞—á–µ–Ω –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–æ–º ‚Äî –≤—ã–∑—ã–≤–∞—é—â–∏–π –ø–æ—Ç–æ–∫ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (—Å–ø–∏—Ç), –Ω–µ –ø–æ—Ç—Ä–µ–±–ª—è—è CPU, –æ–∂–∏–¥–∞—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è.
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ—Å—É—Ä—Å–æ–º –ø–æ—Ç–æ–∫ –≤—ã–∑—ã–≤–∞–µ—Ç **unlock()**, –æ—Å–≤–æ–±–æ–∂–¥–∞—è –º—å—é—Ç–µ–∫—Å.
- –û–¥–∏–Ω –∏–∑ –æ–∂–∏–¥–∞—é—â–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ –ø—Ä–æ–±—É–∂–¥–∞–µ—Ç—Å—è –∏ –ø–æ–ª—É—á–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:** –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –æ–±—ã—á–Ω–æ —Ä–µ–∞–ª–∏–∑—É–µ–º—ã–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –û–° —Å –ø–æ–º–æ—â—å—é —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤.
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ busy-wait:** –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å–ø–∏–Ω–ª–æ–∫–∞, –ø–æ—Ç–æ–∫ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ–∂–∏–¥–∞–Ω–∏—è –º—å—é—Ç–µ–∫—Å–∞ –Ω–µ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç CPU.
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –û–°:** –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫—É –ø–æ—Ç–æ–∫–∞ –≤ –æ—á–µ—Ä–µ–¥—å –æ–∂–∏–¥–∞–Ω–∏—è –∏ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ.
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∫—É—Ä—Å–∏–∏:** –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –º—å—é—Ç–µ–∫—Å, –∫–æ–≥–¥–∞ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –º—å—é—Ç–µ–∫—Å.
- **–í–ª–∞–¥–µ–Ω–∏–µ:** —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫, –∑–∞—Ö–≤–∞—Ç–∏–≤—à–∏–π –º—å—é—Ç–µ–∫—Å, –º–æ–∂–µ—Ç –µ–≥–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å.

---

### –ü—Å–µ–≤–¥–æ–∫–æ–¥ —Ä–∞–±–æ—Ç—ã —Å –º—å—é—Ç–µ–∫—Å–æ–º

```text
function mutex_lock(mutex):
    if mutex is free:
        mutex.owner = current_thread
    else:
        add current_thread to mutex.wait_queue
        block current_thread

function mutex_unlock(mutex):
    if mutex.wait_queue not empty:
        wake up one thread from wait_queue
        mutex.owner = that thread
    else:
        mutex.owner = none
````

---

## ‚öôÔ∏è –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

- –í –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –∏ –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.
    
- –í —è–¥—Ä–∞—Ö –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –¥–ª—è –∑–∞—â–∏—Ç—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ–∫—Ü–∏–π.
    
- –í –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ –∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏.
    
- –í —Å–∏—Å—Ç–µ–º–∞—Ö —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–ª–µ–Ω–∏–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤.
    
- –í –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö, —Å–µ—Ç–µ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö.
    

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ CPU –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏.
    
- –ì–∞—Ä–∞–Ω—Ç–∏—è –≤–∑–∞–∏–º–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö.
    
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏ (–≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö).
    
- –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏.
    
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ –æ–∂–∏–¥–∞–Ω–∏—è –∏ –ø—Ä–µ—Ä—ã–≤–∞–µ–º–æ—Å—Ç–∏.
    

---

## ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ ‚Äî –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã.
    
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–µ–¥–ª–æ–∫–æ–≤ –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏.
    
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ –∏–Ω–≤–µ—Ä—Å–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π.
    
- –ë–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å–æ —Å–ø–∏–Ω–ª–æ–∫–∞–º–∏ –ø—Ä–∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ–∫—Ü–∏—è—Ö.
    
- –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏.
    

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

[[Spinlock]], [[Semaphore]], [[Futex]], [[Atomic Operation]], [[Condition Variable]], [[Thread]], [[Scheduler]], [[Deadlock]], [[Priority Inversion]], [[Lock-Free]], [[RTOS]], [[POSIX Threads]]

---

## –†–µ–∑—é–º–µ

Mutex ‚Äî –∫–ª—é—á–µ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ–∫—Ü–∏–π, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø–æ—Ç–æ–∫–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞–∑–¥–µ–ª—è–µ–º—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –±–µ–∑ –≥–æ–Ω–æ–∫ –∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –û–Ω –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫ –≤ —Å–ª—É—á–∞–µ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ —Ä–µ—Å—É—Ä—Å–∞, –æ—Å–≤–æ–±–æ–∂–¥–∞—è CPU –¥–ª—è –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞—á. –û–¥–Ω–∞–∫–æ —Ç—Ä–µ–±—É–µ—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥–µ–¥–ª–æ–∫–æ–≤ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –∏–Ω–≤–µ—Ä—Å–∏–∏.

---

## üß© –ë–ª–æ–∫-—Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã Mutex

```mermaid
flowchart TB
    Thread1["Thread 1"]
    Thread2["Thread 2"]
    Mutex["Mutex Lock"]
    Resource["Shared Resource"]

    Thread1 -->|lock| Mutex
    Mutex -->|grant access| Thread1
    Thread1 -->|use| Resource
    Thread1 -->|unlock| Mutex

    Thread2 -->|lock| Mutex
    Mutex -->|block Thread 2| Thread2
    Mutex -->|grant access| Thread2
    Thread2 -->|use| Resource
    Thread2 -->|unlock| Mutex

    style Mutex stroke:#fff,stroke-width:5px,font-weight:bold
```

---

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

#### C: –ø—Ä–æ—Å—Ç–æ–π mutex —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º POSIX Threads (pthread)

```c
#include <pthread.h>
#include <stdio.h>

pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;

void* thread_func(void* arg) {
    pthread_mutex_lock(&mutex);
    printf("Thread %ld acquired the mutex\n", (long)arg);
    // –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–µ–∫—Ü–∏—è
    pthread_mutex_unlock(&mutex);
    return NULL;
}

int main() {
    pthread_t t1, t2;
    pthread_create(&t1, NULL, thread_func, (void*)1);
    pthread_create(&t2, NULL, thread_func, (void*)2);
    pthread_join(t1, NULL);
    pthread_join(t2, NULL);
    return 0;
}
```

#### C++: std::mutex

```cpp
#include <mutex>
#include <thread>
#include <iostream>

std::mutex mtx;

void thread_func(int id) {
    mtx.lock();
    std::cout << "Thread " << id << " entered critical section\n";
    mtx.unlock();
}

int main() {
    std::thread t1(thread_func, 1);
    std::thread t2(thread_func, 2);
    t1.join();
    t2.join();
    return 0;
}
```

#### Linux Kernel: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ mutex

```c
struct mutex my_mutex;

mutex_init(&my_mutex);

void critical_section(void) {
    mutex_lock(&my_mutex);
    // –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–µ–∫—Ü–∏—è
    mutex_unlock(&my_mutex);
}
```

---

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**  
POSIX Threads documentation, C++ Standard Library, Linux Kernel Synchronization docs, "Operating Systems: Three Easy Pieces", Wikipedia, osdev.org.
---
aliases:
  - "FD"
  - "File Descriptor"
  - "—Ñ–∞–π–ª–æ–≤—ã–π –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä"
tags:
  - "#os #linux #syscall"
path:
  - "–∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ/–æ—Å/–¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã"
---

## üìå File Descriptor [[FD]]  
File Descriptor [[FD]] ‚Äî —ç—Ç–æ —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π [[Kernel]] –¥–ª—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º, —Å–æ–∫–µ—Ç–∞–º, FIFO, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –∏ –¥—Ä—É–≥–∏–º –æ–±—ä–µ–∫—Ç–∞–º –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞.

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç  
–ö–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≤ [[Linux]] –∏–ª–∏ [[Unix]] –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É [[FD]], –≤ –∫–æ—Ç–æ—Ä–æ–π —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ –æ—Ç–∫—Ä—ã—Ç—ã–µ –æ–±—ä–µ–∫—Ç—ã —è–¥—Ä–∞:

- [[open()]] —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä  
- [[read()]], [[write()]], [[ioctl()]] —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ –Ω–æ–º–µ—Ä –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞  
- FD ‚Äî —ç—Ç–æ –∏–Ω–¥–µ–∫—Å –≤ —Ç–∞–±–ª–∏—Ü–µ, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `struct file` –≤ —è–¥—Ä–µ  
- –ù–∞—Å–ª–µ–¥—É—é—Ç—Å—è –ø—Ä–∏ [[fork()]], –º–æ–≥—É—Ç –±—ã—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ [[dup()]]  
- –ü–µ—Ä–≤—ã–µ —Ç—Ä–∏: `0` ‚Äî stdin, `1` ‚Äî stdout, `2` ‚Äî stderr

–°–≤—è–∑—å:

```

User Process  
‚îî‚îÄ‚îÄ FD Table [0: stdin] ‚Üí [file*] ‚Üí inode ‚Üí disk or socket

````

## ‚öôÔ∏è –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

| –ö–æ–Ω—Ç–µ–∫—Å—Ç               | –ü—Ä–∏–º–µ—Ä—ã                                |
| ---------------------- | -------------------------------------- |
| [[Syscall]] API        | open, close, read, write, poll, select |
| [[Sockets]]            | TCP/UDP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä    |
| [[Pipes]] / [[FIFO]]   | –ö–∞–Ω–∞–ª—ã –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏                |
| [[epoll]] / [[select]] | –ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞       |
| [[Event loop]]         | –†–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –≤ [[async IO]]      |

## üíª –ü—Ä–∏–º–µ—Ä (C, –æ—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞)

```c
#include <fcntl.h>
#include <unistd.h>

int fd = open("file.txt", O_RDONLY);
if (fd < 0) { /* –æ—à–∏–±–∫–∞ */ }

char buf[100];
read(fd, buf, 100);
close(fd);
````

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ –≤—Å–µ–º –≤–∏–¥–∞–º I/O
    
- –ü—Ä–æ—Å—Ç–æ—Ç–∞: —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
    
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π I/O
    

## ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ FD –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å (`ulimit -n`)
    
- –£—Ç–µ—á–∫–∏ FD –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ (`close()` –∑–∞–±—ã–ª–∏)
    
- –ù–µ –≤—Å–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ FD (–Ω–∞–ø—Ä–∏–º–µ—Ä, [[mmap|Memory Map]])
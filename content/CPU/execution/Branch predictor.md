---
aliases:
  - "–ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–æ–≤"
  - "branch predictor"
  - "branch prediction unit"
tags:
  - "#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ #cpu #–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è"
path:
  - "–∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ/–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞/–∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ"
---

## üìå –ö—Ä–∞—Ç–∫–æ  
[[Branch predictor]] ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫ –≤ [[root/CPU/CPU]], –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—é—â–∏–π –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª–æ–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ (–≤–µ—Ç–≤–ª–µ–Ω–∏–π) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–Ω–∏—è [[Pipeline]].

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç  
–í–æ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ (`if`, `loop`, `jmp`) [[root/CPU/CPU]] –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫–æ–π –ø—É—Ç—å –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω. [[Branch predictor]] –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –∏—Å—Ö–æ–¥ –∑–∞—Ä–∞–Ω–µ–µ, —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω—É–∂–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ [[Pipeline]].

–ï—Å–ª–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –≤–µ—Ä–Ω–æ ‚Üí –∫–æ–Ω–≤–µ–π–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –±–µ–∑ –ø–∞—É–∑.  
–ï—Å–ª–∏ –Ω–µ–≤–µ—Ä–Ω–æ ‚Üí –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **pipeline flush** (–æ—á–∏—Å—Ç–∫–∞) –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ ‚Üí –ø–æ—Ç–µ—Ä—è —Ç–∞–∫—Ç–æ–≤.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª–µ–π:

| –¢–∏–ø                 | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
|---------------------|---------------------------------------------|
| Static              | –ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Å–µ–≥–¥–∞ ¬´–≤–Ω–∏–∑¬ª)   |
| Dynamic             | –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è                |
| Bimodal             | 1-–±–∏—Ç–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è (–≤—ã–ø–æ–ª–Ω—è–ª—Å—è/–Ω–µ—Ç)          |
| Two-level Adaptive  | –¢–∞–±–ª–∏—Ü–∞ + –∏—Å—Ç–æ—Ä–∏—è, –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ   |
| Tournament          | –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π             |
| BTB (Branch Target Buffer) | –ö—ç—à –∞–¥—Ä–µ—Å–æ–≤ —Ü–µ–ª–µ–π –ø–µ—Ä–µ—Ö–æ–¥–æ–≤         |

## ‚öôÔ∏è –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞          | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ                              |
|----------------------|--------------------------------------------|
| [[Superscalar CPU]]  | –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Å—è—Ç–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∑–∞—Ä–∞–Ω–µ–µ    |
| [[Out-of-order execution]] | –°–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –≤ –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–∏ |
| [[RISC]]             | –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ —Ç–µ—Ä—è—Ç—å —Ç–∞–∫—Ç—ã –Ω–∞ if/loop       |
| [[x86_64]]           | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç BTB + BHT + RSB –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏    |

## üíª –ü—Ä–∏–º–µ—Ä (–Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ)

```asm
cmp eax, 0
je  label_true   ; ‚Üê —É—Å–ª–æ–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥, –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å—Å—è
````

## üìê –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è

```
     +----------------------+
     |  Branch Instruction  |
     +----------+-----------+
                ‚Üì
        +---------------+
        | Branch History|
        |   Table (BHT) |
        +---------------+
                ‚Üì
        +---------------------+
        | Target Buffer (BTB) |
        +---------------------+
                ‚Üì
       –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å –ø–µ—Ä–µ—Ö–æ–¥–∞
```

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –°–Ω–∏–∂–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ –ø—Ä–∏ —É—Å–ª–æ–≤–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö
    
- –ü–æ–≤—ã—à–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å [[Pipeline]]
    
- –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –≤—ã—Å–æ–∫–æ–π [[IPC]] –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö CPU
    

### ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –û—à–∏–±–∫–∏ ‚Üí pipeline flush –∏ –ø–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    
- –£—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ª–æ–≥–∏–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    
- –£—è–∑–≤–∏–º–æ—Å—Ç—å –∫ –∞—Ç–∞–∫–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, [[Spectre]])
---
title: Cache (–ö—ç—à-–ø–∞–º—è—Ç—å)
aliases:
  - "–∫—ç—à"
  - "Cache memory"
  - "CPU cache"
  - "–∫—ç—à –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞"
  - "Cache L1"
  - "Cache L2"
  - "Cache L3"
tags:
  - "#cache"
  - "#memory"
  - "#hardware"
  - "#cpu"
  - "#glossary"
path:
  - "hardware/cache"
---

## üìå Cache

**Cache** ‚Äî —Å–≤–µ—Ä—Ö–±—ã—Å—Ç—Ä–∞—è —ç–Ω–µ—Ä–≥–æ–∑–∞–≤–∏—Å–∏–º–∞—è –ø–∞–º—è—Ç—å, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –∫ –∫–æ—Ç–æ—Ä—ã–º [[CPU]] –∏–ª–∏ [[GPU]] –æ–±—Ä–∞—â–∞—é—Ç—Å—è —á–∞—â–µ –≤—Å–µ–≥–æ. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ —Ä–∞–∑–Ω–∏—Ü—ã —Å–∫–æ—Ä–æ—Å—Ç–µ–π –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º –∏ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–º—è—Ç—å—é ([[RAM]]), –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–µ—Ä–∂–µ–∫ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –¥–∞–Ω–Ω—ã–º, –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.

---

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —É—Ä–æ–≤–Ω–∏

Cache –æ–±—ã—á–Ω–æ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è:
- **L1** (Level 1): —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –∏ –º–∞–ª–µ–Ω—å–∫–∏–π (—Ç–∏–ø–∏—á–Ω–æ 16‚Äì128 –ö–ë –Ω–∞ —è–¥—Ä–æ), —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ data/instruction (D/I-–∫—ç—à), —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–ª–∏–∑–∫–æ –∫ [[CPU]].
- **L2** (Level 2): –±–æ–ª—å—à–µ (256 –ö–ë ‚Äì 2 –ú–ë –Ω–∞ —è–¥—Ä–æ –∏–ª–∏ –æ–±—â–∏–π –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞), —á—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ L1.
- **L3** (Level 3): –æ–±—â–∏–π –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–¥–µ—Ä, –æ–±—ä—ë–º –¥–æ –¥–µ—Å—è—Ç–∫–æ–≤ –º–µ–≥–∞–±–∞–π—Ç, –∑–∞–º–µ—Ç–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ L2, —Å–æ–µ–¥–∏–Ω—ë–Ω —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—É—é [[Bus]] –∏–ª–∏ [[Ring bus]].

Cache —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞ [[SRAM]], —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥ (–ø—Ä–æ—Ç–∏–≤ –¥–µ—Å—è—Ç–∫–æ–≤-—Å–æ—Ç–µ–Ω –¥–ª—è [[DRAM]]).

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

- **–ü—Ä–∏–Ω—Ü–∏–ø –ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç–∏**: –¥–∞–Ω–Ω—ã–µ/–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–¥–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –∏–ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –±–ª–∏–∑–∫–∏ –∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è —Å–Ω–æ–≤–∞.
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ (lines)**: –¥–∞–Ω–Ω—ã–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –∏–∑ [[RAM]] —Ü–µ–ª—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ (–æ–±—ã—á–Ω–æ 32‚Äì128 –±–∞–π—Ç).
- **–ú–∞–ø–ø–∏–Ω–≥**: –ø—Ä—è–º–∞—è (direct-mapped), –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–∞—è (fully associative), —Å–µ—Ç–∞-–∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–∞—è (set-associative) —Å—Ö–µ–º—ã.
- **–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∑–∞–º–µ—â–µ–Ω–∏—è**: LRU, FIFO, Random, PLRU –∏ –¥—Ä.
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–≥–µ—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å—é**: –¥–ª—è –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã—Ö [[CPU]] —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è MESI/MOESI –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏—è:**
1. [[CPU]] –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ –∞–¥—Ä–µ—Å—É –¥–∞–Ω–Ω—ã—Ö.
2. Cache Controller –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —Å—Ç—Ä–æ–∫–∞ —Å –Ω—É–∂–Ω—ã–º –∞–¥—Ä–µ—Å–æ–º ("hit").
   - –ï—Å–ª–∏ –µ—Å—Ç—å (cache hit): –¥–∞–Ω–Ω—ã–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è [[CPU]].
   - –ï—Å–ª–∏ –Ω–µ—Ç (cache miss): –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ [[RAM]], –≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞ –æ–¥–Ω–æ–π –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç—Ä–æ–∫.
3. –ó–∞–ø–∏—Å—å —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ write-through –∏–ª–∏ write-back (—Å –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –∑–∞–ø–∏—Å—å—é –≤ [[RAM]]).

```mermaid
flowchart TD
    CPU[[CPU]] -->|Address| L1[L1 Cache]
    L1 -->|Miss| L2[L2 Cache]
    L2 -->|Miss| L3[L3 Cache]
    L3 -->|Miss| RAM[RAM]
    L1 -->|Hit| CPU
    L2 -->|Hit| L1
    L3 -->|Hit| L2
````

---

## ‚öôÔ∏è –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

- –í–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ ([[CPU]], [[GPU]], [[DSP]]), –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ ([[MCU]]), [[FPGA]].
    
- –°–µ—Ä–≤–µ—Ä—ã, —Ä–∞–±–æ—á–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏, –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∏ –º–æ–±–∏–ª—å–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.
    
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Å–∫–æ—Ä–∏—Ç–µ–ª–∏ ([[AI accelerator]], [[NIC]]).
    
- –ö—ç—à-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ snoop-—Ñ–∏–ª—å—Ç—Ä—ã –≤ –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã—Ö –∏ NUMA-—Å–∏—Å—Ç–µ–º–∞—Ö.
    

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ [[CPU]] –∫ –¥–∞–Ω–Ω—ã–º –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º.
    
- –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±–µ–∑ —Ä–æ—Å—Ç–∞ —á–∞—Å—Ç–æ—Ç—ã/—ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è.
    
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ [[RAM]] –∏ [[Memory Bus]].
    
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –æ–±—ä—ë–º/—É—Ä–æ–≤–Ω–∏ –∫—ç—à–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤.
    
- –ü–æ–≤—ã—à–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.
    

---

## ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –ó–∞–º–µ—Ç–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –∏–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è [[SRAM]] (–¥–æ—Ä–æ–∂–µ [[DRAM]]).
    
- –û—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã: –º–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –∫–æ–≥–µ—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å, –∫—ç—à-–ª–∏–Ω–∏–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.
    
- –°–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≥–æ–Ω–æ–∫/–∫–æ–≥–µ—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –≤ –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö (snoop, false sharing).
    
- –£—è–∑–≤–∏–º–æ—Å—Ç—å –∫ —Ä—è–¥—É –∞—Ç–∞–∫ –ø–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º –∫–∞–Ω–∞–ª–∞–º ([[Spectre]], [[Meltdown]], [[Flush+Reload]]).
    
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –æ–±—ä—ë–º (—Ñ–∏–∑–∏—á–µ—Å–∫–∏ –Ω–µ–≤—ã–≥–æ–¥–Ω–æ –¥–µ–ª–∞—Ç—å –±–æ–ª—å—à–∏–µ –∫—ç—à–∏).
    
- –í–ª–∏—è–µ—Ç –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å –º–∏–∫—Ä–æ—Å—Ö–µ–º—ã (–¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏ pipeline).
    

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

[[SRAM]], [[DRAM]], [[CPU]], [[GPU]], [[MCU]], [[Cache#L1]], [[Cache#L2]], [[Cache#L3]], [[MESI]], [[MOESI]], [[NUMA]], [[Memory Bus]], [[Pipeline]], [[RAM]], [[Write-back]], [[Write-through]], [[AI accelerator]]

---

## –†–µ–∑—é–º–µ

Cache ‚Äî –∫–ª—é—á–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Ä–µ–∑–∫–æ –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –∑–∞ —Å—á—ë—Ç –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç—É–ø–∞ [[CPU]]/[[GPU]] –∫ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –¥–∞–Ω–Ω—ã–º –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º. –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (L1, L2, L3), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±—ã—Å—Ç—Ä–æ–≥–æ [[SRAM]], –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∫–æ–≥–µ—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –æ–±—Ä–∞—â–µ–Ω–∏–π –ø–æ–∑–≤–æ–ª—è—é—Ç –∫—ç—à—É –±—ã—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –±—É—Ñ–µ—Ä–æ–º –º–µ–∂–¥—É –º–µ–¥–ª–µ–Ω–Ω–æ–π [[RAM]] –∏ –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω—ã–º —è–¥—Ä–æ–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞. –ì–ª–∞–≤–Ω—ã–µ –º–∏–Ω—É—Å—ã: —Å—Ç–æ–∏–º–æ—Å—Ç—å, —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–æ–≥–µ—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –æ–±—ä—ë–º—É –∏ –∞—Ç–∞–∫–∏ –ø–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º –∫–∞–Ω–∞–ª–∞–º.

---

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

#### C: –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—ç—à-–ø—Ä–æ–º–∞—Ö–æ–≤

```c
#include <stdio.h>
#define SIZE 4096*1024

int arr[SIZE];

int main() {
    long long sum = 0;
    for (int stride = 1; stride <= 1024; stride *= 2) {
        for (int i = 0; i < SIZE; i += stride)
            sum += arr[i];
        printf("Stride: %d, Sum: %lld\n", stride, sum);
    }
    return 0;
}
```

_–î–∞–Ω–Ω—ã–π –∫–æ–¥ –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø—Ä–æ–º–∞—Ö–æ–≤ –∫—ç—à–∞ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ stride._

#### –ê—Å—Å–µ–º–±–ª–µ—Ä: —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ L1

```assembly
section .bss
    buffer resb 64

section .text
    global _start
_start:
    mov eax, [buffer]    ; –ß—Ç–µ–Ω–∏–µ –∫—ç—à-–ª–∏–Ω–∏–∏ –∏–∑ –ø–∞–º—è—Ç–∏ (–≤–æ–∑–º–æ–∂–µ–Ω L1 hit)
    add eax, 1
    mov [buffer], eax    ; –ó–∞–ø–∏—Å—å –≤ —Ç—É –∂–µ –∫—ç—à-–ª–∏–Ω–∏—é
    mov eax, 1
    int 0x80
```

#### C: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –∫—ç—à–∞ CPU –≤ Linux

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    system("lscpu | grep 'cache'");
    return 0;
}
```

---

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** Intel¬Æ SDM, ARM Architecture Reference Manual, osdev.org, –í–∏–∫–∏–ø–µ–¥–∏—è, habr.com, —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ JEDEC, –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ ACM/IEEE –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤.
---
title: QSPI (Quad SPI)
aliases:
  - "Quad SPI"
  - "QSPI"
  - "—á–µ—Ç—ã—Ä—ë—Ö–ø—Ä–æ–≤–æ–¥–Ω—ã–π SPI"
  - "quad serial peripheral interface"
tags:
  - "#spi"
  - "#interface"
  - "#hardware"
  - "#flash"
  - "#glossary"
path:
  - "hardware/interface/qspi"
---

## üìå QSPI

**QSPI** (Quad Serial Peripheral Interface, —á–µ—Ç—ã—Ä—ë—Ö–ø—Ä–æ–≤–æ–¥–Ω—ã–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å) ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ SPI, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ —á–µ—Ç—ã—Ä—ë–º –ª–∏–Ω–∏—è–º –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–π, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ —Å —ç–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π –ø–∞–º—è—Ç—å—é ([[Flash]]) –∏ –¥—Ä—É–≥–∏–º–∏ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏.

---

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û—Ç–ª–∏—á–∏—è –æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ SPI

- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö:** –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–π –ª–∏–Ω–∏–∏ MISO –∏ –æ–¥–Ω–æ–π MOSI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 4 –ª–∏–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö (IO0..IO3).
- **–†–µ–∂–∏–º—ã –ø–µ—Ä–µ–¥–∞—á–∏:**  
  - –û–¥–Ω–æ–±–∏—Ç–Ω—ã–π —Ä–µ–∂–∏–º (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å SPI).  
  - –î–≤—É—Ö–±–∏—Ç–Ω—ã–π (Dual SPI).  
  - –ß–µ—Ç—ã—Ä—ë—Ö–±–∏—Ç–Ω—ã–π (Quad SPI) ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞/–ø—Ä–∏—ë–º 4 –±–∏—Ç –∑–∞ —Ç–∞–∫—Ç.
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–Ω–∏—è–º–∏:** —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (CS ‚Äî Chip Select, CLK ‚Äî Clock) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.
- **–í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å:** —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ 4 —Ä–∞–∑–∞ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å SPI –ø—Ä–∏ —Ç–æ–π –∂–µ —Ç–∞–∫—Ç–æ–≤–æ–π —á–∞—Å—Ç–æ—Ç–µ.

### –ü—Ä–∏–Ω—Ü–∏–ø –ø–µ—Ä–µ–¥–∞—á–∏

- –ü–æ —Ç–∞–∫—Ç–æ–≤–æ–º—É —Å–∏–≥–Ω–∞–ª—É CLK —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞—á–∞ 4 –±–∏—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –Ω–∞ –ª–∏–Ω–∏—è—Ö IO0‚ÄìIO3.
- –ö–∞–∂–¥—ã–π —Ç–∞–∫—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç 4 –±–∏—Ç–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ—Å—Ç–∏—á—å –≤—ã—Å–æ–∫–∏—Ö —Å–∫–æ—Ä–æ—Å—Ç–µ–π –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö.
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ QSPI, —Ç—Ä–µ–±—É—é—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤.

### –°—Ö–µ–º–∞ QSPI (–±–ª–æ–∫-—Å—Ö–µ–º–∞)

```mermaid
flowchart TB
    MCU["MCU / Host Controller"]
    CS["Chip Select (CS)"]
    CLK["Clock (CLK)"]
    IO0["Data Line IO0"]
    IO1["Data Line IO1"]
    IO2["Data Line IO2"]
    IO3["Data Line IO3"]
    Flash["QSPI Flash Memory"]

    MCU -->|CS| Flash
    MCU -->|CLK| Flash
    MCU -->|IO0| Flash
    MCU -->|IO1| Flash
    MCU -->|IO2| Flash
    MCU -->|IO3| Flash

    style Flash stroke:#fff,stroke-width:5px,font-weight:bold
````

---

## ‚öôÔ∏è –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

- –í—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —ç–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ –ø–∞–º—è—Ç—å—é (NOR Flash, SPI Flash).
    
- –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—à–∏–≤–æ–∫, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –≤–Ω–µ—à–Ω–µ–π –ø–∞–º—è—Ç–∏ (XIP ‚Äî execute in place).
    
- –°–∏—Å—Ç–µ–º—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≤—ã–≤–æ–¥–æ–≤, —Ç—Ä–µ–±—É—é—â–∏–µ –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.
    
- –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, —Å–µ—Ç–µ–≤–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ, –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Å–∏—Å—Ç–µ–º—ã.
    
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫, –∫–µ—à–µ–π, –ø–∞–º—è—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º.
    

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º SPI.
    
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º SPI-–ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º –≤ –æ–¥–Ω–æ–±–∏—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ.
    
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ü–∏–∫–ª–æ–≤ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö, —Å–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫.
    
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è XIP ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä—è–º–æ –∏–∑ –≤–Ω–µ—à–Ω–µ–π –ø–∞–º—è—Ç–∏.
    
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏.
    

---

## ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ –∏ –ø–∞–º—è—Ç–∏, —Å–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º SPI.
    
- –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è —Ä–∞–∑–≤–æ–¥–∫–∞ –ø–µ—á–∞—Ç–Ω—ã—Ö –ø–ª–∞—Ç –∏–∑-–∑–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ª–∏–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö.
    
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –¥–ª–∏–Ω–µ –ª–∏–Ω–∏–π –∏ –ø–æ–º–µ—Ö–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö —Å–∫–æ—Ä–æ—Å—Ç—è—Ö.
    
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç QSPI.
    
- –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, —Ç—Ä–µ–±—É—é—â–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –¥—Ä–∞–π–≤–µ—Ä–æ–≤.
    

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

[[SPI]], [[I2C]], [[Flash]], [[NOR Flash]], [[XIP]], [[MCU]], [[SoC]], [[DMA]], [[Memory Mapped IO]], [[Serial Interface]]

---

## –†–µ–∑—é–º–µ

QSPI ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ SPI, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ —á–µ—Ç—ã—Ä—ë–º –ª–∏–Ω–∏—è–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±–º–µ–Ω–∞. –®–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —ç–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π –ø–∞–º—è—Ç—å—é –≤ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—é, QSPI –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

---

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

#### C (STM32 HAL): –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —á—Ç–µ–Ω–∏–µ –∏–∑ QSPI Flash

```c
#include "stm32f7xx_hal.h"

QSPI_HandleTypeDef hqspi;

void QSPI_Init(void) {
    hqspi.Instance = QUADSPI;
    hqspi.Init.ClockPrescaler = 1;
    hqspi.Init.FifoThreshold = 4;
    hqspi.Init.SampleShifting = QSPI_SAMPLE_SHIFTING_NONE;
    hqspi.Init.FlashSize = 23; // –ø—Ä–∏–º–µ—Ä: 8 MB
    hqspi.Init.ChipSelectHighTime = QSPI_CS_HIGH_TIME_1_CYCLE;
    hqspi.Init.ClockMode = QSPI_CLOCK_MODE_0;
    hqspi.Init.FlashID = QSPI_FLASH_ID_1;
    hqspi.Init.DualFlash = QSPI_DUALFLASH_DISABLE;
    HAL_QSPI_Init(&hqspi);
}

uint8_t QSPI_ReadByte(uint32_t addr) {
    uint8_t data;
    QSPI_CommandTypeDef cmd = {0};
    cmd.Instruction = 0xEB; // Quad I/O Read command
    cmd.Address = addr;
    cmd.AddressSize = QSPI_ADDRESS_24_BITS;
    cmd.DummyCycles = 6;
    cmd.NbData = 1;
    cmd.DataMode = QSPI_DATA_4_LINES;
    cmd.AddressMode = QSPI_ADDRESS_4_LINES;
    cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
    HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE);
    HAL_QSPI_Receive(&hqspi, &data, HAL_QSPI_TIMEOUT_DEFAULT_VALUE);
    return data;
}
```

#### Python: –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ QSPI Flash —á–µ—Ä–µ–∑ SPI —Å —á–µ—Ç—ã—Ä—å–º—è –ª–∏–Ω–∏—è–º–∏ (—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä)

```python
# –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —á–∞—Å—Ç–æ –Ω—É–∂–Ω–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –¥—Ä–∞–π–≤–µ—Ä—ã
# –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π SPI —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º QSPI

class QSPIFlash:
    def __init__(self, spi):
        self.spi = spi

    def read_quad(self, address, length):
        # –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã —á—Ç–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º 4 –ª–∏–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö
        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–æ–ª–∂–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å Quad SPI
        cmd = [0xEB] + [(address >> 16) & 0xFF, (address >> 8) & 0xFF, address & 0xFF] + [0x00]*6  # dummy cycles
        self.spi.write(cmd)
        data = self.spi.read(length)
        return data
```

---

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**  
STM32 HAL, Micron/Winbond QSPI Flash Datasheets, osdev.org, Wikipedia, manufacturer app notes, embedded.com articles, datasheets SPI/QSPI Flash.